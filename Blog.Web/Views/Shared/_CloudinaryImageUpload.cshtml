<script>
    document.addEventListener('DOMContentLoaded', () => {

        const featuredUploadElement = document.getElementById('featuredImageUpload');
        const featuredImageUrl=document.getElementById('featuredImageUrl');
        const featuredImageShowElement=document.getElementById('featuredImageShow');

        async function uploadFeaturedImage(e) {
            const file = e.target.files[0];
            if (!file) return;

            const data = new FormData();
            data.append('file', file);

            const response = await fetch('/api/images', {
                method: 'POST',
                body: data
            });

            if (!response.ok) {
                console.error('Upload failed');
                return;
            }

            const result = await response.json();
            console.log(result);
            featuredImageUrl.value=result.link;
            featuredImageShowElement.src=result.link;
            featuredImageShowElement.style.display='block';
        }

        featuredUploadElement.addEventListener('change', uploadFeaturedImage);
    });
</script>